package sw2117_방범;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;

public class Solution {
	static class Position {
		int y, x;

		public Position(int y, int x) {
			this.y = y;
			this.x = x;
		}
	}

	static List<Position> list;
	static int N, M;

	public static void main(String[] args) throws NumberFormatException, IOException {
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		br = new BufferedReader(new StringReader(TC));
		int T = Integer.parseInt(br.readLine());
		for (int tc = 1; tc <= T; tc++) {
			StringTokenizer st = new StringTokenizer(br.readLine());
			N = Integer.parseInt(st.nextToken());
			M = Integer.parseInt(st.nextToken());
			list = new ArrayList<>();
			for (int i = 0; i < N; i++) {
				st = new StringTokenizer(br.readLine());
				for (int j = 0; j < N; j++) {
					if (Integer.parseInt(st.nextToken()) == 1)
						list.add(new Position(i, j));
				}
			}
			ans = 0;
			for (int i = 0; i < N; i++) {
				for (int j = 0; j < N; j++) {
					go(i, j);
				}
			}

			System.out.println("#" + tc + " " + ans);

		}
	}

	static int ans;

	static void go(int y, int x) {

		for (int k = 0; k <= N; k++) {
			int cnt = 0;
			for (Position p : list) {

				if ((Math.abs(p.y - y) + Math.abs(p.x - x)) <= k) {
					cnt++;
				}
			}
			int sumM = cnt * M;
			int cost = (int) (Math.pow(k + 1, 2) + Math.pow(k, 2));
			if (sumM - cost >= 0 && cnt > ans) {
				ans = cnt;
			}

		}

	}

	static String TC = "10\r\n" + "8 3\r\n" + "0 0 0 0 0 1 0 0\r\n" + "0 1 0 1 0 0 0 1\r\n" + "0 0 0 0 0 0 0 0\r\n"
			+ "0 0 0 1 0 1 0 0\r\n" + "0 0 1 1 0 0 0 0\r\n" + "0 0 0 0 0 0 0 0\r\n" + "0 0 0 0 1 0 1 0\r\n"
			+ "1 0 0 0 0 0 0 0\r\n" + "7 7\r\n" + "0 0 0 1 0 0 0\r\n" + "0 0 0 0 0 0 0\r\n" + "0 0 0 0 0 0 0\r\n"
			+ "1 0 0 0 0 0 1\r\n" + "0 0 0 0 0 0 0\r\n" + "0 0 0 0 0 0 0\r\n" + "0 0 0 1 0 0 0\r\n" + "10 5\r\n"
			+ "0 0 0 0 0 0 0 0 0 0\r\n" + "0 0 1 0 0 0 0 0 1 1\r\n" + "0 0 0 0 0 1 0 0 1 0\r\n"
			+ "0 0 0 0 0 1 1 0 0 0\r\n" + "0 1 0 0 0 0 0 0 0 1\r\n" + "1 0 0 1 1 1 0 0 0 0\r\n"
			+ "0 1 0 1 0 1 0 0 0 1\r\n" + "0 0 0 0 0 0 1 0 0 1\r\n" + "0 0 1 1 0 0 0 0 0 0\r\n"
			+ "0 0 0 1 0 0 1 1 0 0\r\n" + "15 4\r\n" + "0 0 0 1 0 0 0 0 0 0 0 0 0 1 1\r\n"
			+ "1 0 0 0 0 1 0 0 0 1 0 0 0 0 0\r\n" + "1 0 1 1 0 1 0 0 1 0 0 0 0 0 1\r\n"
			+ "0 0 1 0 1 0 0 0 0 1 0 0 0 0 0\r\n" + "0 0 0 0 0 1 1 1 0 0 0 0 0 0 0\r\n"
			+ "0 1 1 0 0 0 0 0 0 0 1 1 0 1 0\r\n" + "0 0 0 0 0 1 0 1 0 0 1 1 1 1 1\r\n"
			+ "0 0 1 0 0 0 0 0 0 0 0 0 0 0 1\r\n" + "0 0 0 0 0 0 0 1 0 0 1 0 1 1 0\r\n"
			+ "0 1 0 0 0 1 0 1 1 0 0 0 0 0 0\r\n" + "1 1 1 0 0 0 0 0 1 0 0 0 0 1 0\r\n"
			+ "1 0 1 0 0 1 0 1 0 0 1 0 0 0 0\r\n" + "0 0 0 0 0 0 1 1 1 0 1 0 0 0 0\r\n"
			+ "0 0 0 0 0 0 1 0 0 0 1 0 0 1 1\r\n" + "0 0 0 0 1 0 0 0 0 0 0 1 0 0 0\r\n" + "15 3\r\n"
			+ "0 0 0 0 0 0 0 0 0 0 0 0 0 1 0\r\n" + "0 0 0 0 0 0 0 1 0 0 0 0 0 0 0\r\n"
			+ "1 0 0 0 0 0 1 0 0 0 0 0 1 0 0\r\n" + "0 0 0 0 1 0 0 0 0 1 1 0 0 0 1\r\n"
			+ "0 1 0 0 0 0 0 0 0 0 0 0 0 0 0\r\n" + "0 0 0 0 0 0 0 0 0 0 0 0 0 0 1\r\n"
			+ "0 0 1 0 0 0 0 0 1 0 1 0 0 0 0\r\n" + "0 0 0 0 1 0 0 0 0 1 0 0 0 0 0\r\n"
			+ "0 0 0 0 0 0 0 1 0 0 0 0 0 0 0\r\n" + "1 0 0 0 0 0 1 0 1 0 0 0 0 0 0\r\n"
			+ "0 1 0 0 0 0 1 0 0 0 1 0 0 1 0\r\n" + "0 0 0 0 0 0 0 0 0 0 0 0 0 1 0\r\n"
			+ "0 0 0 0 0 0 0 0 0 0 0 0 1 0 0\r\n" + "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\r\n"
			+ "0 0 0 0 0 0 1 0 0 0 1 0 1 0 0\r\n" + "15 8\r\n" + "0 0 1 0 0 0 0 0 0 0 0 0 0 0 1\r\n"
			+ "0 0 0 0 0 1 0 0 0 0 0 0 0 1 1\r\n" + "0 0 0 0 1 0 0 0 1 1 1 0 1 0 0\r\n"
			+ "1 1 0 0 0 1 0 1 0 0 0 0 1 0 0\r\n" + "0 1 0 0 1 0 1 0 1 0 0 0 0 1 1\r\n"
			+ "0 0 0 0 0 0 0 1 0 0 0 1 0 0 0\r\n" + "1 0 0 0 1 0 0 0 1 0 1 0 1 0 1\r\n"
			+ "1 1 1 0 0 0 0 0 1 0 0 0 0 1 0\r\n" + "1 1 0 0 0 0 0 0 1 0 1 0 1 0 0\r\n"
			+ "1 1 0 0 1 0 1 0 0 0 0 0 0 1 0\r\n" + "0 0 0 0 0 0 0 0 1 0 0 1 1 0 1\r\n"
			+ "0 0 0 0 1 0 0 0 1 0 0 0 0 0 0\r\n" + "0 1 0 0 1 1 0 0 0 0 0 0 0 0 1\r\n"
			+ "1 0 0 0 0 0 0 1 1 1 0 0 0 1 1\r\n" + "1 0 0 0 0 1 0 0 0 0 0 1 0 1 1\r\n" + "15 2\r\n"
			+ "1 0 1 1 0 1 1 1 0 1 0 0 0 0 0\r\n" + "1 0 0 1 0 0 0 0 1 0 0 0 1 0 0\r\n"
			+ "0 0 0 0 0 0 0 0 1 1 1 1 0 0 0\r\n" + "1 0 0 0 0 0 0 0 0 0 0 1 0 1 1\r\n"
			+ "1 1 1 1 1 1 1 0 0 1 0 0 1 1 0\r\n" + "0 1 0 1 0 0 0 0 0 1 1 0 1 1 0\r\n"
			+ "1 0 0 1 1 1 0 0 1 0 0 0 0 1 1\r\n" + "0 1 1 1 1 1 0 1 0 1 0 0 0 0 1\r\n"
			+ "0 0 1 1 0 0 0 0 0 0 0 0 1 1 1\r\n" + "0 1 1 1 0 0 0 1 1 0 0 1 0 0 1\r\n"
			+ "0 0 1 0 0 1 1 0 1 0 0 0 1 0 0\r\n" + "1 1 1 1 1 0 0 1 1 0 1 1 1 1 1\r\n"
			+ "1 1 0 0 0 0 0 1 0 0 0 0 0 1 0\r\n" + "1 1 0 1 0 0 0 0 0 1 0 0 0 0 1\r\n"
			+ "0 1 0 0 0 0 1 0 0 1 0 1 0 0 0\r\n" + "20 4\r\n" + "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\r\n"
			+ "0 0 0 0 1 1 0 0 1 0 0 0 1 0 0 0 1 0 0 0\r\n" + "1 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0\r\n"
			+ "0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0\r\n" + "0 0 0 1 1 0 0 0 1 0 0 0 0 0 1 0 0 1 1 1\r\n"
			+ "0 0 0 0 0 0 0 1 0 0 0 0 0 1 1 0 0 0 0 1\r\n" + "0 0 0 0 0 1 1 0 0 1 0 1 0 0 0 0 0 0 0 0\r\n"
			+ "0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 1\r\n" + "0 1 0 0 0 1 0 1 1 1 0 0 0 0 0 0 0 0 1 0\r\n"
			+ "0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 1 0\r\n" + "0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0\r\n"
			+ "1 0 0 1 0 0 1 0 0 1 0 0 0 0 0 0 0 0 0 1\r\n" + "0 0 0 1 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0\r\n"
			+ "0 0 1 0 0 0 0 1 0 0 0 0 1 0 1 0 0 1 0 0\r\n" + "0 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0\r\n"
			+ "0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0\r\n" + "0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 1 0 0\r\n"
			+ "0 0 0 1 0 0 1 0 0 0 0 0 0 0 1 0 1 1 0 0\r\n" + "0 0 1 0 1 0 0 0 0 1 1 1 0 0 0 0 0 1 0 0\r\n"
			+ "0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 1 0 0 0\r\n" + "20 10\r\n"
			+ "0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 1 0 1 0 1\r\n" + "0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 0 0 0\r\n"
			+ "0 0 0 1 0 0 1 0 0 1 0 0 0 1 0 0 0 0 1 0\r\n" + "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0\r\n"
			+ "1 0 1 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0\r\n" + "0 0 0 0 0 0 1 1 1 0 0 1 1 0 0 0 1 0 0 0\r\n"
			+ "0 0 0 0 1 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0\r\n" + "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\r\n"
			+ "0 1 0 0 0 0 0 0 1 0 1 0 0 0 0 1 0 0 0 0\r\n" + "1 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0\r\n"
			+ "0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 1 0 1 1 0\r\n" + "0 1 0 0 0 1 0 1 0 1 0 0 0 0 0 0 0 1 0 0\r\n"
			+ "0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0\r\n" + "1 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0\r\n"
			+ "0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0\r\n" + "0 0 1 0 0 0 0 0 1 1 1 0 0 1 0 0 0 0 0 0\r\n"
			+ "0 0 0 0 0 0 1 0 1 0 1 0 1 0 0 0 0 0 0 0\r\n" + "0 0 1 0 1 1 1 1 1 1 0 0 0 1 0 0 0 1 0 1\r\n"
			+ "0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 0 0\r\n" + "0 1 0 0 1 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0\r\n" + "20 3\r\n"
			+ "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n" + "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n"
			+ "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n" + "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n"
			+ "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n" + "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n"
			+ "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n" + "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n"
			+ "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n" + "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n"
			+ "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n" + "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n"
			+ "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n" + "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n"
			+ "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n" + "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n"
			+ "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n" + "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n"
			+ "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\r\n" + "1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1";
	static String TC1 = "1\r\n" + "8 3\r\n" + "0 0 0 0 0 1 0 0\r\n" + "0 1 0 1 0 0 0 1\r\n" + "0 0 0 0 0 0 0 0\r\n"
			+ "0 0 0 1 0 1 0 0\r\n" + "0 0 1 1 0 0 0 0\r\n" + "0 0 0 0 0 0 0 0\r\n" + "0 0 0 0 1 0 1 0\r\n"
			+ "1 0 0 0 0 0 0 0";
}
